<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CinePlex — Professional Movie Booking</title>
  <link rel="shortcut icon" href="assets/logo.png" type="image/x-icon">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html,body {
      height: 100%;
    }
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(180deg,#0f0f10 0%,#1a1a1a 60%);
      color: #eaeef2;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 68px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      backdrop-filter: blur(6px);
      background: rgba(6,6,8,0.6);
      border-bottom: 1px solid rgba(255,255,255,0.03);
      z-index: 1200;
    }
    .left-area {
      display:flex;
      align-items:center;
      gap:12px;
    }
    .menu-icon {
      width:44px;
      height:44px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
      color:#00f2fe;
      border-radius:8px;
      cursor:pointer;
    }
    .logo {
      font-weight:700;
      font-size:20px;
      background:linear-gradient(90deg,#00f2fe,#4facfe);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .searchbox {
      margin-left:12px;
      width:300px;
      max-width:40vw;
    }
    .searchbox input {
      width:100%;
      padding:8px 12px;
      border-radius:20px;
      border:1px solid rgba(255,255,255,0.06);
      background:rgba(255,255,255,0.03);
      color:#eaf6fb;
      font-size:14px;
    }
    nav.header-nav {
      display:flex;
      gap:18px;
      align-items:center;
    }
    nav.header-nav a {
      color:#cfeef6;
      text-decoration:none;
      font-size:14px;
      padding:6px 8px;
      border-radius:8px;
    }
    nav.header-nav a:hover {
      color:#fff;
      background:rgba(0,242,254,0.05);
    }
    .sidebar {
      position: fixed;
      top: 0;
      left: -260px;
      width: 260px;
      height: 100%;
      background: linear-gradient(180deg,#0b0b0c,#111215);
      box-shadow: 6px 0 30px rgba(0,0,0,0.7);
      transition: left .28s cubic-bezier(.2,.9,.2,1);
      z-index: 1300;
      padding-top: 78px;
      overflow:auto;
    }
    .sidebar.active { left:0; }
    .sidebar .nav {
      display:flex;
      flex-direction:column;
      gap:6px;
      padding:12px;
    }
    .sidebar .nav button {
      text-align:left;
      padding:10px 12px;
      background:transparent;
      color:#dff9ff;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-size:14px;
    }
    .sidebar .nav button:hover {
      background: rgba(0,242,254,0.06);
      color:#fff;
    }
    .sidebar .divider {
      height:1px;
      background:rgba(255,255,255,0.03);
      margin:12px 8px;
    }
    .bookings-list {
      padding:10px;
      color:#bfeef6;
      font-size:13px;
    }
    .bookings-list .item {
      padding:10px;
      margin-bottom:8px;
      background:rgba(255,255,255,0.02);
      border-radius:8px;
      font-size:13px;
    }
    main {
      margin-top: 88px;
      padding: 28px;
      max-width:1200px;
      margin-left: auto;
      margin-right: auto;
    }
    .hero {
      display:flex;
      gap:24px;
      align-items:center;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      padding:28px;
      overflow:hidden;
    }
    .hero .left {
      flex:1;
    }
    .hero h1 {
      font-size:32px;
      line-height:1.02;
      color:#e6fbff;
      margin-bottom:8px;
    }
    .hero p { color:#cfeef6; margin-bottom:16px; }
    .hero .cta { display:flex; gap:12px; align-items:center; }
    .hero .poster {
      width:220px;
      height:300px;
      border-radius:12px;
      background-size:cover;
      background-position:center;
      box-shadow:0 8px 30px rgba(0,0,0,0.6);
      flex-shrink:0;
    }
    .section-title {
      font-size:20px;
      color:#00f2fe;
      margin:22px 0 12px;
    }
    .movies-grid {
      display:grid;
      grid-template-columns: repeat(auto-fill,minmax(200px,1fr));
      gap:14px;
    }
    .movie-card {
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:330px;
      transition:transform .18s ease;
    }
    .movie-card:hover { transform: translateY(-6px); }
    .movie-card img {
      width:100%;
      height:225px;
      object-fit:cover;
      background:#111;
      display:block;
    }
    .movie-meta {
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      flex:1;
    }
    .movie-meta h3 {
      font-size:16px;
      color:#dff9ff;
      margin-bottom:2px;
    }
    .movie-meta .sub {
      font-size:13px;
      color:#bcdfe8;
    }
    .movie-meta .meta-row {
      margin-top:auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .movie-meta .book-btn {
      padding:8px 12px;
      background:linear-gradient(90deg,#00f2fe,#4facfe);
      border:none;
      color:#001217;
      font-weight:700;
      border-radius:10px;
      cursor:pointer;
    }
    .carousel {
      display:flex;
      gap:12px;
      overflow-x:auto;
      padding-bottom:6px;
    }
    .carousel img {
      height:160px;
      border-radius:10px;
      object-fit:cover;
      flex-shrink:0;
    }
    .modal {
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.6);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:1400;
      padding:20px;
    }
    .modal.active { display:flex; }
    .modal-card {
      width:100%;
      max-width:820px;
      background:linear-gradient(180deg,#0f1213,#111416);
      border-radius:12px;
      padding:18px;
      box-shadow:0 20px 50px rgba(0,0,0,0.7);
      color:#eaf9ff;
    }
    .modal-grid {
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:16px;
    }
    .modal-left img {
      width:100%;
      border-radius:10px;
      height:300px;
      object-fit:cover;
    }
    .modal-right {
      background:rgba(255,255,255,0.02);
      border-radius:8px;
      padding:12px;
      height:100%;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .showtimes {
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .showtime {
      padding:8px 10px;
      border-radius:8px;
      background:rgba(255,255,255,0.03);
      cursor:pointer;
      font-size:13px;
    }
    .showtime.active { background:linear-gradient(90deg,#00f2fe,#4facfe); color:#001217; font-weight:700; }
    .seats-grid {
      display:grid;
      grid-template-columns: repeat(8,1fr);
      gap:8px;
      padding-top:10px;
    }
    .seat {
      height:34px;
      background:#172022;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-size:13px;
      color:#dff9ff;
      user-select:none;
    }
    .seat.selected { background:linear-gradient(90deg,#00f2fe,#4facfe); color:#001217; font-weight:700; }
    .seat.occupied { background:#2b3031; color:#6f7a7b; cursor:not-allowed; }
    .summary {
      margin-top:auto;
      background:rgba(0,0,0,0.25);
      padding:10px;
      border-radius:8px;
    }
    .contact-card {
      max-width:820px;
      margin:24px auto;
      background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
      border-radius:12px;
      padding:18px;
      display:flex;
      gap:18px;
      align-items:flex-start;
    }
    .contact-left { flex:1; }
    .contact-right { width:320px; }
    .contact-left h2 { color:#00f2fe; margin-bottom:8px; }
    .contact-left p { color:#bfeef6; margin-bottom:12px; }
    .form-row { display:flex; gap:8px; margin-bottom:8px; }
    .form-row input, .form-row textarea, .form-row select {
      padding:10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.03);
      background:rgba(0,0,0,0.2);
      color:#eaf9ff;
      width:100%;
      font-size:14px;
    }
    .faq-list { margin-top:14px; display:flex; flex-direction:column; gap:8px; }
    .faq-item { background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; }
    .faq-question { display:flex; justify-content:space-between; align-items:center; cursor:pointer; font-weight:700; color:#dff9ff; }
    .faq-answer { margin-top:8px; color:#bfeef6; display:none; font-size:14px; }
    @media (max-width:980px) {
      .modal-grid { grid-template-columns: 1fr; }
      .hero { flex-direction:column; align-items:flex-start; }
      .hero .poster { width:150px; height:220px; }
      .movie-card img { height:200px; }
      .searchbox { width:220px; }
      .sidebar { width:220px; }
      .modal-card { padding:12px; }
    }
    @media (max-width:640px) {
      header { padding:10px; }
      .logo { font-size:18px; }
      .searchbox { display:none; }
      main { padding:16px; }
      .movies-grid { grid-template-columns:1fr; gap:12px; }
    }
    .page {
  display: none;
}
.page.active {
  display: block;
}
.btn {
  padding: 8px 14px;
  border: none;
  border-radius: 8px;
  background: linear-gradient(90deg,#00f2fe,#4facfe);
  font-weight: 600;
  color: #001217;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

  </style>
</head>
<body>
  <div class="sidebar" id="sidebar">
    <div class="nav">
      <button data-page="home">Home</button>
      <button data-page="movies">Movies</button>
      <button data-page="showtimes">Showtimes</button>
      <button data-page="contact">Contact</button>
    </div>
    <div class="divider"></div>
    <div style="padding:12px;color:#9feef8;font-weight:700">Your Bookings</div>
    <div class="bookings-list" id="sidebarBookings">
      <div style="color:#9fbfc6;padding:12px;font-size:13px">No bookings yet</div>
    </div>
  </div>

  <header>
    <div class="left-area">
      <div class="menu-icon" id="menuBtn">☰</div>
      <div class="logo">CinePlex</div>
      <div class="searchbox">
        <input id="searchInput" placeholder="Search movies, shows..." />
      </div>
    </div>
    <nav class="header-nav">
      <a href="#" data-page="home">Home</a>
      <a href="#" data-page="movies">Movies</a>
      <a href="#" data-page="showtimes">Showtimes</a>
      <a href="#" data-page="contact">Contact</a>
    </nav>
  </header>

  <main>
    <section id="home" class="page active">
      <div class="hero">
        <div class="left">
          <h1>Premium Screens. Instant Booking.</h1>
          <p>Choose a movie, pick a showtime and select seats — all in one place.</p>
          <div class="cta">
            <button class="btn" id="seeMoviesBtn">View Movies</button>
            <button class="btn" id="seeTrendingBtn">Trending</button>
          </div>
        </div>
        <div class="poster" id="featuredPoster" style="background-image:url('assets/mirai.jpg')"></div>
      </div>

      <div>
        <div class="section-title">Recommended Movies <button class="btn" id="seeAllBtn" style="margin-left:12px;padding:6px 10px;font-size:13px">See All</button></div>
        <div class="movies-grid" id="recommendedGrid"></div>
      </div>

      <div style="margin-top:22px">
        <div class="section-title">Trending Now</div>
        <div class="carousel" id="trendingCarousel"></div>
      </div>
    </section>

    <section id="movies" class="page">
      <div class="section-title">Now Showing</div>
      <div class="movies-grid" id="moviesGrid"></div>
    </section>

    <section id="showtimes" class="page">
      <div class="section-title">Showtimes</div>
      <div id="showtimesContainer"></div>
    </section>

    <section id="contact" class="page">
      <div class="contact-card">
        <div class="contact-left">
          <h2>Contact Us</h2>
          <p>Questions, feedback or corporate bookings? Send us a message and we'll get back within 24 hours.</p>
          <div class="faq-list" id="faqList"></div>
        </div>
        <div class="contact-right">
          <form id="contactForm">
            <div style="font-weight:700;color:#fff;margin-bottom:8px">Send a message</div>
            <div class="form-row">
              <input id="cName" placeholder="Full name" required />
            </div>
            <div class="form-row">
              <input id="cEmail" placeholder="Email" type="email" required />
            </div>
            <div class="form-row">
              <textarea id="cMessage" rows="6" placeholder="Type your message" required></textarea>
            </div>
            <div style="display:flex;justify-content:flex-end">
              <button class="btn" type="submit">Send</button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <div class="modal" id="bookingModal">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div style="font-weight:800;color:#dff9ff" id="modalMovieTitle">Movie</div>
        <div style="cursor:pointer;font-size:20px;color:#aeeff8" id="closeModal">✕</div>
      </div>
      <div class="modal-grid">
        <div class="modal-left">
          <img id="modalPoster" src="assets/mirai.jpg" alt="poster" />
          <div style="margin-top:10px;color:#bfeef6" id="modalSynopsis">Synopsis will appear here.</div>
        </div>
        <div class="modal-right">
          <div style="font-size:14px;color:#cfeef6" id="modalGenre">Genre</div>
          <div style="font-size:13px;color:#bfeef6" id="modalDuration">Duration</div>
          <div style="margin-top:8px">Select date</div>
          <input type="date" id="modalDate" />
          <div style="margin-top:8px">Select showtime</div>
          <div class="showtimes" id="modalTimes"></div>
          <div style="margin-top:10px">Select seats</div>
          <div class="seats-grid" id="modalSeats"></div>
          <div class="summary">
            <div>Selected seats: <span id="summarySeats">None</span></div>
            <div style="margin-top:8px">Price: ₹<span id="summaryPrice">0</span></div>
            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="btn" id="confirmBookingBtn">Confirm</button>
              <button class="btn" id="cancelBookingBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.05);color:#dff9ff">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer style="padding:18px;text-align:center;color:#9fbfc6;margin-top:24px">
    © 2025 CinePlex. Patrons: Dolby | IMAX | RealD 3D | Netflix Originals
  </footer>

  <script>
    const movies = [
      { id:1, title:"Mirai", genre:"Sci-Fi Action", duration:"2h 15m", rating:"4.8", price:250, image:"assets/mirai.jpg", synopsis:"A high-octane sci-fi adventure through layered dreams and time." , times:["10:00 AM","1:30 PM","5:00 PM","8:30 PM"] },
      { id:2, title:"Kotha Lokah", genre:"Romance", duration:"1h 45m", rating:"4.9", price:200, image:"assets/kotha-lokah.jpg", synopsis:"A tender romantic drama weaving modern lives and fate." , times:["11:00 AM","2:00 PM","6:00 PM","9:00 PM"] },
      { id:3, title:"Kishkindhapuri", genre:"Adventure", duration:"2h 5m", rating:"4.2", price:220, image:"assets/kishkindapuri.jpg", synopsis:"An epic journey into a forgotten kingdom full of secrets." , times:["12:00 PM","3:30 PM","7:00 PM"] },
      { id:4, title:"Little Hearts", genre:"Comedy", duration:"1h 55m", rating:"4.5", price:180, image:"assets/little-hearts.jpg", synopsis:"A heartwarming comedy about friendship, family and laughs." , times:["10:30 AM","2:30 PM","6:30 PM","9:30 PM"] },
      { id:5, title:"The Conjuring: Last Rites", genre:"Horror", duration:"1h 50m", rating:"3.9", price:230, image:"assets/conjuring.jpg", synopsis:"The chilling final chapter that tests courage and faith." , times:["11:30 AM","4:00 PM","8:00 PM"] },
      { id:6, title:"Demon Slayer: Infinity Castle", genre:"Action", duration:"2h 30m", rating:"4.9", price:300, image:"assets/demonslayer.jpg", synopsis:"Anime spectacle of swords, bonds and the ultimate battle." , times:["1:00 PM","5:30 PM","9:15 PM"] }
    ];

    const faqItems = [
      { q:"How do I book tickets?", a:"Select a movie, choose date & showtime, pick seats and confirm payment." },
      { q:"Can I cancel or reschedule a booking?", a:"Cancellations depend on cinema policy—usually before 2 hours of showtime. Check booking details." },
      { q:"What payment methods are accepted?", a:"We accept credit/debit cards, UPI, netbanking and popular wallets." },
      { q:"Are refunds available?", a:"Refunds are processed as per the cinema's refund policy. Contact support for details." },
      { q:"Can I choose my preferred seats?", a:"Yes — available seats are shown during booking. Click seats to select them." },
      { q:"Are there special prices for students or seniors?", a:"Some shows offer discounts; check the price details for the showtime." },
      { q:"How do group bookings work?", a:"For large groups, contact our support or the theater for bulk booking assistance." },
      { q:"Is there wheelchair or accessible seating?", a:"Most theaters provide accessible seating; check seating map or contact the theater." },
      { q:"Can I buy food with my booking?", a:"Food ordering varies by cinema. Some theaters allow pre-ordering concessions." },
      { q:"How do I get help with a failed payment?", a:"If payment fails, your card won't be charged. Retry or contact your bank and our support." }
    ];

    const sidebar = document.getElementById("sidebar");
    const menuBtn = document.getElementById("menuBtn");
    const pageLinks = Array.from(document.querySelectorAll('[data-page]'));
    const headerLinks = Array.from(document.querySelectorAll('nav.header-nav a'));
    const pages = Array.from(document.querySelectorAll('.page'));
    const recommendedGrid = document.getElementById("recommendedGrid");
    const moviesGrid = document.getElementById("moviesGrid");
    const trendingCarousel = document.getElementById("trendingCarousel");
    const showtimesContainer = document.getElementById("showtimesContainer");
    const bookingModal = document.getElementById("bookingModal");
    const modalMovieTitle = document.getElementById("modalMovieTitle");
    const modalPoster = document.getElementById("modalPoster");
    const modalGenre = document.getElementById("modalGenre");
    const modalDuration = document.getElementById("modalDuration");
    const modalSynopsis = document.getElementById("modalSynopsis");
    const modalTimes = document.getElementById("modalTimes");
    const modalSeats = document.getElementById("modalSeats");
    const modalDate = document.getElementById("modalDate");
    const summarySeats = document.getElementById("summarySeats");
    const summaryPrice = document.getElementById("summaryPrice");
    const confirmBookingBtn = document.getElementById("confirmBookingBtn");
    const closeModal = document.getElementById("closeModal");
    const sidebarBookings = document.getElementById("sidebarBookings");
    const faqList = document.getElementById("faqList");
    let currentMovie = null;
    let currentShowtime = null;
    let seatPrice = 0;
    let selectedSeats = [];

    function openSidebar() {
      sidebar.classList.add("active");
      renderSidebarBookings();
    }
    function closeSidebar() {
      sidebar.classList.remove("active");
    }
    menuBtn.addEventListener("click", () => {
      if (sidebar.classList.contains("active")) closeSidebar(); else openSidebar();
    });
    pageLinks.forEach(btn => btn.addEventListener("click",(e)=>{
      const page = btn.getAttribute("data-page");
      navigateTo(page);
      closeSidebar();
    }));
    headerLinks.forEach(a => a.addEventListener("click",(e)=>{
      e.preventDefault();
      const page = a.getAttribute("data-page");
      navigateTo(page);
    }));
    function navigateTo(pageId) {
      pages.forEach(p => p.classList.remove("active"));
      const target = document.getElementById(pageId);
      if (target) target.classList.add("active");
      headerLinks.forEach(l => l.classList.remove("active"));
      const link = headerLinks.find(l => l.getAttribute("data-page") === pageId);
      if (link) link.classList.add("active");
      if (pageId === "movies") renderMovies();
      if (pageId === "showtimes") renderShowtimes();
    }

    function renderMovies() {
      recommendedGrid.innerHTML = "";
      moviesGrid.innerHTML = "";
      trendingCarousel.innerHTML = "";
      movies.forEach(m => {
        const card = document.createElement("div");
        card.className = "movie-card";
        card.innerHTML = `<img src="${m.image}" alt="${m.title}" />
          <div class="movie-meta">
            <div>
              <h3>${m.title}</h3>
              <div class="sub">${m.genre} • ${m.duration}</div>
            </div>
            <div class="meta-row">
              <div style="font-size:13px;color:#bfeef6">₹${m.price}</div>
              <button class="book-btn" data-id="${m.id}">Book Now</button>
            </div>
          </div>`;
        moviesGrid.appendChild(card);
        const rec = card.cloneNode(true);
        recommendedGrid.appendChild(rec);
        const tn = document.createElement("img");
        tn.src = m.image;
        tn.alt = m.title;
        trendingCarousel.appendChild(tn);
      });
      const buttons = document.querySelectorAll(".book-btn");
      buttons.forEach(b => b.addEventListener("click", (e)=>{
        const id = Number(e.currentTarget.getAttribute("data-id"));
        const mv = movies.find(x=>x.id===id);
        if (mv) openBookingModal(mv);
      }));
    }

    function renderShowtimes() {
      showtimesContainer.innerHTML = "";
      movies.forEach(m=>{
        const card = document.createElement("div");
        card.style.marginBottom = "12px";
        card.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,255,255,0.02);border-radius:10px">
          <div>
            <div style="font-weight:800;color:#dff9ff">${m.title}</div>
            <div style="font-size:13px;color:#bfeef6">${m.genre} • ${m.duration}</div>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">${m.times.map(t=>`<div class="showtime" data-movie="${m.id}" data-time="${t}">${t}</div>`).join("")}</div>
        </div>`;
        showtimesContainer.appendChild(card);
      });
      document.querySelectorAll(".showtime").forEach(el => el.addEventListener("click",(e)=>{
        const id = Number(e.currentTarget.getAttribute("data-movie"));
        const time = e.currentTarget.getAttribute("data-time");
        const mv = movies.find(x=>x.id===id);
        if (mv) {
          openBookingModal(mv);
          setTimeout(()=> {
            Array.from(modalTimes.children).forEach(ch => {
              ch.classList.remove("active");
              if (ch.getAttribute("data-time")===time) ch.classList.add("active");
            });
            currentShowtime = time;
            updateSummary();
          },120);
        }
      }));
    }

    function openBookingModal(movie) {
      currentMovie = movie;
      currentShowtime = null;
      selectedSeats = [];
      seatPrice = movie.price;
      modalMovieTitle.textContent = movie.title;
      modalPoster.src = movie.image;
      modalGenre.textContent = movie.genre;
      modalDuration.textContent = movie.duration;
      modalSynopsis.textContent = movie.synopsis;
      modalTimes.innerHTML = "";
      movie.times.forEach(t=>{
        const el = document.createElement("div");
        el.className = "showtime";
        el.textContent = t;
        el.setAttribute("data-time",t);
        el.addEventListener("click",()=>{
          modalTimes.querySelectorAll(".showtime").forEach(s=>s.classList.remove("active"));
          el.classList.add("active");
          currentShowtime = t;
          updateSummary();
        });
        modalTimes.appendChild(el);
      });
      modalDate.value = "";
      generateSeatsGrid();
      updateSummary();
      bookingModal.classList.add("active");
    }

    function closeBookingModal() {
      bookingModal.classList.remove("active");
      currentMovie = null;
      currentShowtime = null;
      selectedSeats = [];
    }
    closeModal.addEventListener("click", closeBookingModal);
    document.getElementById("cancelBookingBtn").addEventListener("click", closeBookingModal);
    bookingModal.addEventListener("click",(e)=>{
      if (e.target === bookingModal) closeBookingModal();
    });

    function generateSeatsGrid() {
      modalSeats.innerHTML = "";
      for (let r=0; r<5; r++) {
        for (let c=1; c<=8; c++) {
          const seatIndex = String.fromCharCode(65+r) + c;
          const div = document.createElement("div");
          div.className = "seat";
          div.textContent = seatIndex;
          if (Math.random() < 0.16) {
            div.classList.add("occupied");
          } else {
            div.addEventListener("click", ()=> {
              if (div.classList.contains("occupied")) return;
              if (div.classList.contains("selected")) {
                div.classList.remove("selected");
                selectedSeats = selectedSeats.filter(s=>s!==seatIndex);
              } else {
                div.classList.add("selected");
                selectedSeats.push(seatIndex);
              }
              updateSummary();
            });
          }
          modalSeats.appendChild(div);
        }
      }
    }

    function updateSummary() {
      summarySeats.textContent = selectedSeats.length ? selectedSeats.join(", ") : "None";
      summaryPrice.textContent = selectedSeats.length * seatPrice;
    }

    confirmBookingBtn.addEventListener("click", ()=> {
      if (!currentMovie) return;
      if (!modalDate.value) { alert("Please choose a date"); return; }
      if (!currentShowtime) { alert("Please choose a showtime"); return; }
      if (selectedSeats.length === 0) { alert("Please select seats"); return; }
      const booking = {
        movie: currentMovie.title,
        date: modalDate.value,
        time: currentShowtime,
        seats: [...selectedSeats],
        price: selectedSeats.length * seatPrice,
        id: 'BKG' + Date.now()
      };
      saveBooking(booking);
      closeBookingModal();
      openSidebar();
    });

    function saveBooking(b) {
      const data = JSON.parse(localStorage.getItem("cine_bookings")||"[]");
      data.unshift(b);
      localStorage.setItem("cine_bookings", JSON.stringify(data));
      renderSidebarBookings();
    }

    function renderSidebarBookings() {
      const data = JSON.parse(localStorage.getItem("cine_bookings")||"[]");
      sidebarBookings.innerHTML = "";
      if (!data.length) {
        const none = document.createElement("div");
        none.style.color = "#9fbfc6";
        none.style.padding = "12px";
        none.textContent = "No bookings yet";
        sidebarBookings.appendChild(none);
        return;
      }
      data.slice(0,12).forEach(b=>{
        const it = document.createElement("div");
        it.className = "item";
        it.innerHTML = `<div style="font-weight:800">${b.movie}</div><div style="font-size:13px;color:#bfeef6">${b.date} • ${b.time}</div><div style="margin-top:6px;font-size:13px">${b.seats.join(", ")}</div>`;
        sidebarBookings.appendChild(it);
      });
    }

    document.getElementById("seeMoviesBtn").addEventListener("click", ()=> navigateTo("movies"));
    document.getElementById("seeAllBtn").addEventListener("click", ()=> navigateTo("movies"));
    document.getElementById("seeTrendingBtn").addEventListener("click", ()=> {
      const el = document.getElementById("trendingCarousel");
      el.scrollTo({ left: el.scrollLeft + 300, behavior: "smooth" });
    });

    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", ()=> {
      const q = searchInput.value.trim().toLowerCase();
      document.querySelectorAll("#moviesGrid .movie-card").forEach(card=>{
        const t = card.querySelector("h3").textContent.toLowerCase();
        card.style.display = t.includes(q) ? "" : "none";
      });
      document.querySelectorAll("#recommendedGrid .movie-card").forEach(card=>{
        const t = card.querySelector("h3").textContent.toLowerCase();
        card.style.display = t.includes(q) ? "" : "none";
      });
    });

    function renderFAQ() {
      faqList.innerHTML = "";
      faqItems.forEach(item=>{
        const el = document.createElement("div");
        el.className = "faq-item";
        el.innerHTML = `<div class="faq-question">${item.q}<span style="color:#00f2fe">+</span></div><div class="faq-answer">${item.a}</div>`;
        faqList.appendChild(el);
      });
      document.querySelectorAll(".faq-question").forEach(q=>{
        q.addEventListener("click", ()=>{
          const ans = q.nextElementSibling;
          ans.style.display = ans.style.display === "block" ? "none" : "block";
        });
      });
    }

    function autoScrollTrending() {
      const c = document.getElementById("trendingCarousel");
      let dir = 1;
      setInterval(()=> {
        if (!c) return;
        c.scrollLeft += 1 * dir;
        if (c.scrollLeft + c.offsetWidth >= c.scrollWidth - 2) dir = -1;
        if (c.scrollLeft <= 0) dir = 1;
      },20);
    }

    function init() {
      renderMovies();
      renderShowtimes();
      renderFAQ();
      renderSidebarBookings();
      autoScrollTrending();
    }

    document.getElementById("contactForm").addEventListener("submit", (e)=>{
      e.preventDefault();
      alert("Thanks! We'll reply to your message soon.");
      e.target.reset();
    });

    window.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
